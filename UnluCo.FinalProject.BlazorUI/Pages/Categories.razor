@page "/categories"
@inherits CategoryModelView
@using Newtonsoft.Json
<h3>Categories</h3>

@if (VM is null)
{
    <p>
        asdlkasfklnknlafsklnasf

    </p>
    <button class="btn btn-primary" @onclick="Callme">Click me</button>

}
else
{
    <hr />

    <p>
        <button class="btn btn-primary" @onclick="Callme">Click ME 2</button>
        @VM.Title

    </p>
}

@code {


    public CategoryModelView VM { get; set; }

    HttpClient client = new HttpClient();

    public async void Callme()
    {
        var category = await client.GetAsync("http://localhost:19383/api/Categories/1");
        VM = JsonConvert.DeserializeObject<CategoryModelView>(await category.Content.ReadAsStringAsync());
    }

    //protected override async Task OnInitializedAsync()
    //{
    //    // If any authorization available

    //}



    //System.Text.Encoding.UTF8.GetString(await category.Content.ReadAsByteArrayAsync())



}

